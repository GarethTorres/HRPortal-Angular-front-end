<div *ngIf="visaStatus$ | async as visaStatus">
    <ng-container *ngIf="visaStatus.visaType === 'OPT'; else notOpt">
      <h2>OPT Visa Status Management</h2>
  
      <!-- OPT Receipt -->
      <div *ngIf="visaStatus.currentStep === 'OPT_RECEIPT'">
        <h3>OPT Receipt</h3>
        <p *ngIf="visaStatus.status === 'PENDING'">Waiting for HR to approve your OPT Receipt.</p>
        <p *ngIf="visaStatus.status === 'APPROVED'">Please upload a copy of your OPT EAD.</p>
        <p *ngIf="visaStatus.status === 'REJECTED'">{{visaStatus.feedback}}</p>
        <input type="file" (change)="uploadDocument('OPT_RECEIPT', $event.target.files[0])" [disabled]="visaStatus.status !== 'APPROVED'">
      </div>
  
      <!-- OPT EAD -->
      <div *ngIf="visaStatus.currentStep === 'OPT_EAD'">
        <h3>OPT EAD</h3>
        <p *ngIf="visaStatus.status === 'PENDING'">Waiting for HR to approve your OPT EAD.</p>
        <p *ngIf="visaStatus.status === 'APPROVED'">Please download and fill out the I-983 form.</p>
        <p *ngIf="visaStatus.status === 'REJECTED'">{{visaStatus.feedback}}</p>
        <input type="file" (change)="uploadDocument('OPT_EAD', $event.target.files[0])" [disabled]="visaStatus.status !== 'APPROVED'">
      </div>
  
      <!-- I-983 -->
      <div *ngIf="visaStatus.currentStep === 'I_983'">
        <h3>I-983</h3>
        <button (click)="downloadTemplate('EMPTY')">Download Empty Template</button>
        <button (click)="downloadTemplate('SAMPLE')">Download Sample Template</button>
        <p *ngIf="visaStatus.status === 'PENDING'">Waiting for HR to approve and sign your I-983.</p>
        <p *ngIf="visaStatus.status === 'APPROVED'">Please send the I-983 along with all necessary documents to your school and upload the new I-20.</p>
        <p *ngIf="visaStatus.status === 'REJECTED'">{{visaStatus.feedback}}</p>
        <input type="file" (change)="uploadDocument('I_983', $event.target.files[0])" [disabled]="visaStatus.status !== 'APPROVED'">
      </div>
  
      <!-- I-20 -->
      <div *ngIf="visaStatus.currentStep === 'I_20'">
        <h3>I-20</h3>
        <p *ngIf="visaStatus.status === 'PENDING'">Waiting for HR to approve your I-20.</p>
        <p *ngIf="visaStatus.status === 'APPROVED'">All documents have been approved.</p>
        <p *ngIf="visaStatus.status === 'REJECTED'">{{visaStatus.feedback}}</p>
        <input type="file" (change)="uploadDocument('I_20', $event.target.files[0])" [disabled]="visaStatus.status !== 'APPROVED'">
      </div>
    </ng-container>
  
    <ng-template #notOpt>
      <p>Visa status management is only available for OPT visa holders.</p>
    </ng-template>
  </div>


  